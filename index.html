<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CORE-FLUX | jDarkxng</title>
    <style>
        /* jDarkxng Master Version - High Performance Layout */
        :root { 
            --neon-red: #DE0000; 
            --neon-cyan: #00E5FF; 
            --neon-green: #39FF14;
            --bg: #000000; 
        }
        
        * { 
            box-sizing: border-box; 
            margin: 0; padding: 0;
            font-family: sans-serif !important;
            -webkit-tap-highlight-color: transparent;
        }

        html, body { 
            height: 100vh; width: 100vw;
            background: var(--bg); 
            color: #fff; 
            overflow: hidden; 
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
        }

        .app-container {
            width: 95%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            text-align: center;
            padding-bottom: 40px;
            z-index: 10;
        }

        .header-box h1 {
            color: var(--neon-red);
            font-size: 40px;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 0 0 15px var(--neon-red);
        }

        .header-box p {
            color: #888;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
            font-weight: bold;
        }

        #editor {
            width: 100%;
            height: 280px;
            background: #050505;
            border: 2px solid #222;
            border-radius: 15px;
            color: var(--neon-green);
            padding: 15px;
            font-size: 15px;
            outline: none;
            resize: none;
            transition: 0.3s;
            box-shadow: inset 0 0 15px rgba(0,0,0,1);
            touch-action: auto !important;
            user-select: text !important;
            -webkit-user-select: text !important;
        }

        #editor:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0,229,255,0.2);
        }

        .btn-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .btn {
            background: #080808;
            border: 1px solid #333;
            color: #fff;
            padding: 14px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn:active { transform: scale(0.95); background: #111; }
        .btn-purify { border-color: var(--neon-cyan); color: var(--neon-cyan); }
        .btn-extract { border-color: var(--neon-red); color: var(--neon-red); }
        
        .btn-main {
            grid-column: span 2;
            background: transparent;
            color: var(--neon-green);
            border: 2px solid var(--neon-green);
            font-size: 13px;
            box-shadow: 0 0 10px rgba(57,255,20,0.2);
            text-shadow: 0 0 5px var(--neon-green);
            font-weight: 900;
        }

        .btn-main:active {
            background: var(--neon-green);
            color: #000;
            box-shadow: 0 0 20px var(--neon-green);
        }

        /* FOOTER CLONADO DE TRIADA */
        footer {
            position: fixed;
            bottom: 10px;
            width: 100%;
            text-align: center;
            font-size: 0.6rem;
            color: rgba(0, 242, 255, 0.5);
            letter-spacing: 1px;
            z-index: 4000;
            pointer-events: none;
        }
    </style>
</head>
<body oncontextmenu="return true;">

    <div class="app-container">
        <div class="header-box">
            <h1>Core-Flux</h1>
            <p>Optimizador de Código Nativo y Editor</p>
        </div>

        <textarea id="editor" spellcheck="false" placeholder="INGRESE CÓDIGO O TEXTO AQUÍ..."></textarea>
        
        <div class="btn-grid">
            <button class="btn btn-purify" onclick="purify()">Purificación Plana</button>
            <button class="btn btn-extract" onclick="extractJS()">Extraer Scripts</button>
            <button class="btn" onclick="copyCode()">Copiar Código</button>
            <button class="btn" onclick="clearAll()">Limpiar Todo</button>
            <button class="btn btn-main" id="btnDownload" onclick="downloadIndex()">Descargar index.html</button>
        </div>
    </div>

    <footer>jDarkxng © 2026 | Desarrollado con asistencia de IA avanzada | Licencia MIT</footer>

    <script>
        function purify() {
            const editor = document.getElementById('editor');
            let code = editor.value;
            if(!code) return;
            code = code.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm, '$1');
            code = code.replace(/\r?\n|\r/g, " ");
            code = code.replace(/\s+/g, ' ').trim();
            code = code.replace(/>\s+</g, '><');
            editor.value = code;
        }

        function extractJS() {
            const editor = document.getElementById('editor');
            const regex = /<script\b[^>]*>([\s\S]*?)<\/script>/g;
            let scripts = [];
            let match;
            while ((match = regex.exec(editor.value)) !== null) { scripts.push(match[1].trim()); }
            if(scripts.length > 0) { 
                editor.value = scripts.join('\n\n/* --- SECCIÓN SIGUIENTE --- */\n\n'); 
            } else {
                alert("No se detectaron etiquetas <script>");
            }
        }

        function clearAll() { document.getElementById('editor').value = ''; }

        function copyCode() {
            const editor = document.getElementById('editor');
            if(!editor.value) return;
            editor.select();
            navigator.clipboard.writeText(editor.value);
            const btn = event.target;
            const originalText = btn.innerText;
            btn.innerText = "¡COPIADO!";
            setTimeout(() => { btn.innerText = originalText; }, 1000);
        }

        function downloadIndex() {
            const code = document.getElementById('editor').value;
            if(!code) return;
            const blob = new Blob([code], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'index.html';
            document.body.appendChild(a);
            a.click();
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(a.href);
            }, 150);
        }

        document.addEventListener('touchstart', function (e) {
            if (e.target.id === 'editor') return;
            if (e.touches.length > 1) { e.preventDefault(); }
        }, { passive: false });
        
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (e) {
            if (e.target.id === 'editor') return;
            let now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) { e.preventDefault(); }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>